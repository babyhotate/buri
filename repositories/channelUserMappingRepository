const { ChannelUserMapping } = require('../models/channelUserMapping');

class ChannelUserMappingRepository {
  static tableName = "channel_user_mappings";

  static toModel(row) {
    return new ChannelUserMapping({
      id: row["id"],
      channel_id: row["channel_id"],
      user_id: row["user_id"]
    });
  }

  static async findAll(connection) {
    const [rows] = await connection.query(
      `SELECT * FROM ${this.tableName}`
    );

    const channelUserMappings = rows.map(row => this.toModel(row));
    return channelUserMappings;
  }
}

module.exports.ChannelUserMappingRepository = ChannelUserMappingRepository;