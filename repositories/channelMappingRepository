const { ChannelMapping } = require('../models/channelMapping');

class ChannelMappingRepository {
  static tableName = "channel_mappings";

  static toModel(row) {
    return new ChannelMapping({
      id: row["id"],
      channel_id: row["channel_id"],
      user_id: row["user_id"]
    });
  }

  static async findAll(connection) {
    const [rows] = await connection.query(
      `SELECT * FROM ${this.tableName}`
    );

    const channelMappings = rows.map(row => this.toModel(row));
    return channelMappings;
  }
}

module.exports.ChannelMappingRepository = ChannelMappingRepository;